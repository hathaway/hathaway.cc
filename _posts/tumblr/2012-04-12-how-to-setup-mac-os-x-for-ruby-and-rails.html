---
layout: post
title: How to setup Mac OS X for ruby and rails development
date: '2012-04-12T09:49:00-04:00'
tags: []
tumblr_url: http://hathaway.cc/post/69203784459/how-to-setup-mac-os-x-for-ruby-and-rails
---
<p>Most developers spend their first day on a new computer setting up their develoment environment. If you are a ruby developer, this article should help you get started quickly.</p>
<p>I&rsquo;m assuming you are starting with a clean install of Mac OS X Lion. A similar environment could be created off of the same or similar tools for a Linux machine.</p>
<p>The pieces of this development environment are:</p>
<ul><li>rbenv</li>
<li>ruby-build</li>
<li>ruby</li>
<li>bundler</li>
<li>rails</li>
<li>MySQL</li>
<li>redis</li>
<li>pow</li>
</ul><p>This should give you a broad set of tools that will cover most development environment needs. You could easily add more tools to your environment if needed.</p>
<p><img alt="" class="mce-wp-more" src="http://hathaway.cc/wp-includes/js/tinymce/plugins/wordpress/img/trans.gif" title="More..."/></p>
<h2>Install Xcode</h2>
<p>Xcode provides many of the necessary compilers and libraries needed for your development environment.</p>
<p>As of Lion, this is an easy install via the Mac App Store. It is a large download so while this step is easy, it will take some time to download and install.</p>
<p>The following link will take you to the Mac App Store to install.</p>
<p><a href="http://itunes.apple.com/us/app/xcode/id497799835?mt=12">http://itunes.apple.com/us/app/xcode/id497799835?mt=12</a></p>
<h2>Install Homebrew</h2>
<p>Homebrew is the easiest and most flexible way to install the UNIX tools Apple didn&rsquo;t include with OS X.</p>
<p><a href="http://mxcl.github.com/homebrew">http://mxcl.github.com/homebrew</a></p>
<p>To install run the following command:</p>
<pre><code>/usr/bin/ruby -e "$(/usr/bin/curl -fksSL <a href="https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb">https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb</a>)"</code>
</pre>
<p>You can see detailed instructions on what happens when you run this command to install here:</p>
<p><a href="https://github.com/mxcl/homebrew/wiki/installation">https://github.com/mxcl/homebrew/wiki/installation</a></p>
<h2>Remove RVM (if necessary)</h2>
<p>If you have previously used RVM in your environment, you&rsquo;ll want to get rid of this so it doesn&rsquo;t interfere with your new environment. This is a simple task. Just run:</p>
<pre><code>rvm implode</code>
</pre>
<h2>Install MySQL Server</h2>
<p>Now that we have homebrew installed, these installations become simple single line commands.</p>
<pre><code>brew install mysql</code>
</pre>
<h2>Install Redis (optional)</h2>
<p>Redis is an open source, advanced key-value store. It has many uses such as caching and serving as a queue for background jobs (via resque).</p>
<p>Once again, an easy to install with homebrew.</p>
<pre><code>brew install redis</code>
</pre>
<h2>Install rbenv and ruby-build</h2>
<p>The basis of this environment is rbenv which allows you to run self-contained ruby environments for each of your projects. This setup has huge advantages over a system wide install of ruby that would force you to keep all of your projects on the same version of ruby as well as gems.</p>
<p>I chose rbenv over rvm because it&rsquo;s simple, unobtrusive, and follows the UNIX tradition of single-purpose tools that do one thing well.</p>
<p><a href="https://github.com/sstephenson/rbenv">https://github.com/sstephenson/rbenv</a></p>
<p><a href="https://github.com/sstephenson/ruby-build">https://github.com/sstephenson/ruby-build</a></p>
<p>Use homebrew to install.</p>
<pre><code>brew install rbenv</code>
<code>brew install ruby-build</code>
</pre>
<p>Add to ~/.bash_profile:</p>
<pre><code>eval "$(rbenv init -)"</code>
<code>alias b=‘bundle exec’</code>
</pre>
<p>I like to alias the `bundle exec` command to just `b` to save some typing. If you prefer not to do that, just skip adding that line to the .bash_profile.</p>
<p>Restart your Terminal.</p>
<h2>Install pow</h2>
<p>Pow is a zero-config Rack server for Mac OS X. Instead of running the rails server manually for each of your projects, pow runs it for you and gives you a simple hostname to. So instead of going to http://localhost:3000 after starting your rails server, you can just go straight to <a href="http://project.dev">http://project.dev</a> (where &ldquo;project&rdquo; is replaced with the folder name of your project.</p>
<p><a href="http://pow.cx">http://pow.cx</a></p>
<p>Note: I&rsquo;ve had trouble using pow before when using custom DNS servers in my Network settings. If something isn&rsquo;t working right when you try to use pow, check your DNS settings and make sure you are using the defaults.</p>
<p>To install pow, simply run:</p>
<pre><code>curl get.pow.cx | sh</code>
</pre>
<p>You can view this script before running it on their website.</p>
<h2>Install ruby</h2>
<p>Now we can install our rubies. At the time of writing this I had projects running on both 1.8.7 and 1.9.3 so I&rsquo;m going to show you how to setup both and set one as the global version.</p>
<p>Install ruby 1.9.3:</p>
<pre><code>rbenv install 1.9.3-p0</code>
</pre>
<p>Install ruby 1.8.7:</p>
<pre><code>rbenv install 1.8.7-p352 </code>
</pre>
<p>After installing a new ruby or a global gem, you need to run the following command.</p>
<pre><code>rbenv rehash</code>
</pre>
<p>Set the global ruby to 1.9.3:</p>
<pre><code>rbenv global 1.9.3-p0</code>
</pre>
<h2>Configure your global gem settings</h2>
<p>I typically always just use <a href="http://google.com">Google</a> and the online documentation for <a href="http://ruby-doc.org/">ruby</a>, <a href="http://guides.rubyonrails.org/" title="Rails Guides">rails</a>, and other gems. So installing the rdoc&rsquo;s for all of our gems is a waste. I prefer to disable this in a .gemrc file.</p>
<p>Add this line to the ~/.gemrc file:</p>
<pre><code>gem: --no-rdoc --no-ri</code>
</pre>
<h2>Install bundler</h2>
<p>Bundler manages an application&rsquo;s dependencies through its entire life across many machines systematically and repeatably.</p>
<p>Bundler has to be installed for each version of ruby you want to run it on.</p>
<pre><code>rbenv shell 1.9.3-p0</code>
<code>gem install bundler</code>
<code>rbenv shell 1.8.7-p352</code>
<code>gem install bundler</code>
<code>rbenv rehash</code>
</pre>
<p>Configure bundler in ~/.bundle/config:</p>
<pre><code>BUNDLE_PATH: vendor/bundle</code>
</pre>
<p>This line tells bundler to install my gems in a relative path specific to each project.</p>
<h2>Install Rails</h2>
<p>Similar to bundler, you want to install the rails gem for each of your ruby versions.</p>
<pre><code>rbenv shell 1.9.3-p0</code>
<code>gem install rails</code>
<code>rbenv shell 1.8.7-p352</code>
<code>gem install rails</code>
<code>rbenv rehash</code>
</pre>
<h2>Setup your first Rails project</h2>
<p>Now you&rsquo;re ready to setup your first project. We are going to create a sample project called &ldquo;blog&rdquo;.</p>
<p>Create a projects folder if you don&rsquo;t already have one.</p>
<pre><code>mkdir ~/Projects</code>
<code>cd ~/Projects</code>
</pre>
<p>Remember that we want to use MySQL as the database for the Rails project so we are going to pass that in with the rails command.</p>
<pre><code>rails new blog --database=mysql</code>
</pre>
<p>Set the project specific ruby version.</p>
<pre><code>cd ~/Projects/blog</code>
<code>rbenv local 1.9.3-p0</code>
</pre>
<p>This sets a local per-project Ruby version by writing the version name to an .rbenv-version file in the current directory.</p>
<p>Now run bundler on your new project.</p>
<pre><code>bundle install</code>
</pre>
<p>This will install all of the gems for this project into:</p>
<pre><code>~/Projects/blog/vendor/bundle</code>
</pre>
<p>If you ever get into a situation where your gems are working correctly, you can simple delete that entire bundle directory and run bundle install again to get fresh versions of everything for your project.</p>
<p>To setup pow for your new rails project, just create a symbolic link to the project folder in the ~/.pow directory.</p>
<pre><code>cd ~/.pow</code>
<code>ln -s ~/Projects/blog</code>
</pre>
<p>That&rsquo;s it! Now you should be able to access your new project at:</p>
<p><a href="http://blog.dev">http://blog.dev</a></p>
<h2>Other apps you might want</h2>
<h3>GitHub</h3>
<p>I highly recommend using GitHub to host your projects. They offer a free app for working with git repositories and it makes it super easy to use with their service.</p>
<p><a href="http://mac.github.com">http://mac.github.com</a></p>
<h3>Sublime Text 2</h3>
<p>This is the text editor I use and prefer. It has a lot of cool features and is very customizable.</p>
<p><a href="http://www.sublimetext.com/2">http://www.sublimetext.com/2</a></p>
<h3>MySQL Workbench</h3>
<p>MySQL offers a free app for managing your MySQL databases.</p>
<p><a href="http://www.mysql.com/products/workbench">http://www.mysql.com/products/workbench</a></p>
